{"version":3,"sources":["0","js\\loc&WeatherApi.js","js\\main.js"],"names":["module","exports","weatherApiKey","LocationApi","ipCache","JSON","parse","localStorage","getItem","Date","now","timestamp","Promise","resolve","data","setItem","stringify","fetch","then","res","status","json","reject","LocalStorageApi","i","length","key","keyValue","j","removeItem","Weather","city","weatherCache","apiKeys","Dom","preloader","document","getElementsByClassName","locationBlock","getElementById","country","classList","remove","add","coordinates","innerHTML","location","name","weatherData","weather_today","weekday","querySelector","date","weatherIcon","description","tempMax","tempMin","humidity","pressure","winds","forecast","forecastday","day","toLocaleString","src","current","condition","icon","text","temp_c","mintemp_c","pressure_mb","wind_kph","toFixed","weather_item","maxtemp_c","error","errorMessage","inputCity","value","test","hidePreloader","onkeyup","setDateMain","time","toLocaleTimeString","toLocaleDateString","dom","weather","loc","storage","loadDateAndLocation","showPreloader","setDate","removeStorageItem","getMyLocation","catch","log","rej","getWeather","setLocation","setWeatherMain","window","onload","ScheduleItem","parent","split","reverse","join","scheduleItem","createElement","dayMonth","taskDate","appendChild","taskRow","statOutput","navArrow","taskSet","setTasks","setStatistic","checkHiddenTask","onclick","hideTasks","bind","textContent","toDateString","slice","taskStr","todoCache","taskArr","Object","values","map","el","indexOf","state","task","total","keys","done","statistic","arr","querySelectorAll","scheduleWrp","schedule","setAttribute","getTime"],"mappings":"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","file":"main.a5b7f1c3.map","sourceRoot":"..\\src","sourcesContent":[null,"import apiKeys from \"./config.json\";\r\n\r\n// =======================\r\n// locationApi\r\n// =======================\r\n          \r\nexport class LocationApi {\r\n    getMyLocation(){\r\n        const ipCache = JSON.parse(localStorage.getItem(\"ipCache\")) || {};\r\n        if (ipCache[\"location\"]) {\r\n            if (Date.now() - ipCache[\"location\"].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(ipCache[\"location\"].data);\r\n\r\n            } else {\r\n                ipCache[\"location\"] = null;\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n            }\r\n        }\r\n\r\n        \r\n        return fetch(`http://ip-api.com/json`)\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            }\r\n\r\n            return Promise.reject(res.status);\r\n        })\r\n\r\n        .then((data) => {\r\n                ipCache[\"location\"] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n\r\n}\r\n\r\n// =======================\r\n// localStorageApi\r\n// =======================\r\n\r\nexport class LocalStorageApi {\r\n    removeStorageItem(){\r\n        for (let i = 0; i < localStorage.length; i++) {\r\n            let key = localStorage.key(i);\r\n            let keyValue =  JSON.parse(localStorage.getItem(key)); \r\n            for (let j in keyValue) {\r\n                if (Date.now() - keyValue[j].timestamp > 1000 * 60 * 20) {\r\n                    localStorage.removeItem(key);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// =======================\r\n// weatherApi\r\n// =======================\r\n\r\nexport class Weather {\r\n    getWeather(city){\r\n        const weatherCache = JSON.parse(localStorage.getItem(\"weatherCache\")) || {};\r\n        if (weatherCache[city]) {\r\n            if (Date.now() - weatherCache[city].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(weatherCache[city].data);\r\n\r\n            } else {\r\n                weatherCache[city] = null;\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n            }\r\n        }\r\n\r\n        \r\n        return fetch(`https://api.apixu.com/v1/forecast.json?key=${apiKeys.weatherApiKey}&q=${city}&days=6&lang=en`)\r\n       \t.then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            } \r\n            \r\n            return Promise.reject(res.status);\r\n\t\t})\r\n\r\n        .then((data) => {\r\n                weatherCache[city] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n}\r\n\r\n// =======================\r\n// domApi\r\n// =======================\r\n\r\nexport class Dom {\r\n    constructor(){\r\n        this.preloader = document.getElementsByClassName(\"preloader\");\r\n        this.locationBlock =  document.getElementById(\"location_block\");\r\n        this.country = document.getElementById(\"country\");\r\n        this.city = document.getElementById(\"city\");\r\n    }\r\n\r\n    showPreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.remove(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    hidePreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.add(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    setLocation(coordinates) {\r\n        this.country.innerHTML = coordinates.location.country;\r\n        this.city.innerHTML = coordinates.location.name;\r\n    }\r\n\r\n    setWeatherToday(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weekday =  weather_today.querySelector(\"[class='weekday']\");\r\n        this.date =  weather_today.querySelector(\"[class='date']\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        this.humidity = weather_today.querySelector(\"[class='humidity']\");\r\n        this.pressure = weather_today.querySelector(\"[class='pressure']\");\r\n        this.winds = weather_today.querySelector(\"[class='wind']\");\r\n\r\n        this.date.innerHTML = weatherData.forecast.forecastday[0].date;\r\n        this.day = new Date(this.date.innerHTML);\r\n        this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n        this.humidity.innerHTML = weatherData.current.humidity + \" %\";\r\n        this.pressure.innerHTML = weatherData.current.pressure_mb + \" hPa\";\r\n        this.winds.innerHTML = (weatherData.current.wind_kph / 3.6).toFixed(1) + \" m/s\";\r\n    }\r\n\r\n    setWeatherForecast(weatherData){\r\n        const weather_item = document.getElementsByClassName(\"weather_item\");\r\n        for (let i = 0; i < weather_item.length; i++){\r\n            this.weekday =  weather_item[i].querySelector(\"[class='weekday']\");\r\n            this.date =  weather_item[i].querySelector(\"[class='date']\");\r\n            this.weatherIcon =  weather_item[i].querySelector(\"[class='weather_icon']\");\r\n            this.tempMax =  weather_item[i].querySelector(\"[class='temp_max']\");\r\n            this.tempMin =  weather_item[i].querySelector(\"[class='temp_min']\");\r\n            \r\n            this.date.innerHTML = weatherData.forecast.forecastday[i + 1].date;\r\n            this.day = new Date(this.date.innerHTML);\r\n            this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n            this.weatherIcon.src = \"http:\" + weatherData.forecast.forecastday[i + 1].day.condition.icon;\r\n            this.tempMax.innerHTML = weatherData.forecast.forecastday[i + 1].day.maxtemp_c + \" ºC\";\r\n            this.tempMin.innerHTML = weatherData.forecast.forecastday[i + 1].day.mintemp_c + \" ºC\";\r\n        }\r\n    }\r\n\r\n    setWeatherMain(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        \r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n    }\r\n\r\n    showError(error){\r\n        this.errorMessage = document.getElementById(\"error\");\r\n        this.inputCity = document.getElementById(\"input_city\");\r\n        if(!this.inputCity.value) {\r\n            this.errorMessage.innerHTML = \"Please, type city\";\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (!/^[A-z]{1,}/.test(this.inputCity.value)) {\r\n            this.errorMessage.innerHTML = `Please, type city with Latin characters.`;\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (error === 400) {            \r\n            this.errorMessage.innerHTML = `Error ${error}. No location is found. Please, type correct city`;\r\n            this.inputCity.classList.add(\"error\");\r\n        } else {\r\n            this.errorMessage.innerHTML = `Error ${error}. Server is not available. Please, try again later`;\r\n        }\r\n\r\n        this.errorMessage.classList.remove(\"done\");\r\n        this.hidePreloader();\r\n\r\n        this.inputCity.onkeyup = () => {\r\n            this.errorMessage.classList.add(\"done\");\r\n            this.inputCity.classList.remove(\"error\");\r\n        }\r\n    }\r\n}\r\n\r\n","// div.cd-left\r\n// =========================\r\n\r\n// =========================\r\n// SetDateandWeatherMainApi\r\n// =========================\r\n\r\nimport { LocationApi, LocalStorageApi, Weather, Dom } from \"./loc&WeatherApi.js\";\r\n\r\nclass setDateMain {\r\n    setDate() {\r\n        this.time = document.getElementById(\"time\");\r\n        this.day = document.getElementById(\"day\");\r\n        this.date = new Date();\r\n        const timeOptions = {\r\n            hour: \"numeric\", \r\n            minute: \"numeric\",\r\n        };\r\n        const dayOptions = {\r\n            weekday: \"long\", \r\n            day: \"numeric\", \r\n            month: \"long\",\r\n            year: \"numeric\",\r\n        };\r\n\r\n        this.time.innerHTML = this.date.toLocaleTimeString(\"en-GB\", timeOptions);\r\n        this.day.innerHTML = this.date.toLocaleDateString(\"en-GB\", dayOptions);\r\n    }\r\n\r\n}\r\n\r\nconst date = new setDateMain();\r\nconst dom = new Dom();\r\nconst weather = new Weather;\r\nconst loc = new LocationApi;\r\nconst storage = new LocalStorageApi();\r\n\r\nfunction loadDateAndLocation(){\r\n    dom.showPreloader();\r\n    date.setDate();\r\n    storage.removeStorageItem();\r\n    loc.getMyLocation()\r\n    \t.catch(rej => {\r\n\t\t\tconsole.log('Error:', rej);\r\n\t\t\treturn { \"city\" : \"Poltava\"}\r\n\t\t})\r\n        .then(res => weather.getWeather(res.city))\r\n        .then(res => {\r\n            dom.setLocation(res);\r\n            dom.setWeatherMain(res);\r\n            dom.hidePreloader();\r\n\t\t})\r\n\t\t.catch(rej => {\r\n\t\t\tdom.hidePreloader();\r\n\t\t\tconsole.log('Error:', rej);\r\n\t\t})\r\n}\r\n\r\nwindow.onload = () => {\r\n    loadDateAndLocation();\r\n}\r\n\r\n// =========================\r\n// SheduleItem\r\n// =========================\r\n\r\nclass ScheduleItem {\r\n\tconstructor(day, parent){\r\n\t\tthis.date = new Date(day).toLocaleDateString().split(\".\").reverse().join(\"-\");\r\n\r\n\t\tthis.scheduleItem = document.createElement(\"div\");\r\n\t\tthis.scheduleItem.classList.add(\"schedule_item\");\r\n\r\n\t\tthis.weekday = document.createElement(\"span\");\r\n\t\tthis.weekday.classList.add(\"weekday\");\r\n\t\tthis.dayMonth = document.createElement(\"span\");\r\n\t\tthis.dayMonth.classList.add(\"day_month\");\r\n\t\tthis.taskDate = document.createElement(\"div\");\r\n\t\tthis.taskDate.classList.add(\"task_date\");\r\n\t\tthis.taskDate.appendChild(this.weekday);\r\n\t\tthis.taskDate.appendChild(this.dayMonth);\r\n\r\n\t\tthis.taskRow = document.createElement(\"div\");\r\n\t\tthis.taskRow.classList.add(\"task_row\");\r\n\t\tthis.statOutput = document.createElement(\"div\");\r\n\t\tthis.statOutput.classList.add(\"statOutput\");\r\n\t\tthis.navArrow = document.createElement(\"span\");\r\n\t\tthis.navArrow.classList.add(\"navArrow\");\r\n\t\tthis.navArrow.innerHTML = \"<i class='fas fa-caret-down'></i>\";\r\n\t\tthis.navArrow.classList.add(\"hide\");\r\n\t\tthis.taskSet = document.createElement(\"div\");\r\n\t\tthis.taskSet.classList.add(\"taskSet\");\r\n\t\tthis.taskSet.appendChild(this.taskRow);\r\n\t\tthis.taskSet.appendChild(this.statOutput);\r\n\t\tthis.taskSet.appendChild(this.navArrow);\r\n\t\t\r\n\t\tthis.setDate(day);\r\n\t\tthis.setTasks();\r\n\t\tthis.setStatistic();\r\n\t\tthis.checkHiddenTask = true;\r\n\t\tthis.scheduleItem.onclick = this.hideTasks.bind(this);\t\t\r\n\r\n\t\tthis.scheduleItem.appendChild(this.taskDate);\r\n\t\tthis.scheduleItem.appendChild(this.taskSet);\t\t\r\n\t\tparent.appendChild(this.scheduleItem);\r\n\t}\r\n\r\n\tsetDate(day){\r\n\t\tthis.weekday.textContent = new Date(day).toDateString().slice(0, 3);\r\n\t\tthis.dayMonth.textContent = new Date(day).toLocaleDateString().slice(0, 5);\r\n    }\r\n    \r\n    setTasks(){\r\n\t\tthis.taskStr = \"\";\r\n\t\tif(todoCache[this.date]){\r\n\t\t\tthis.taskArr = Object.values(todoCache[this.date]);\r\n\t\t\tthis.taskArr.map((el) => {\r\n\t\t\t\tif(this.taskArr.indexOf(el) < 3) {\r\n\t\t\t\t\t(el.state === true) ? this.taskStr +=`<p><span>${el.task}</span></p>`\r\n\t\t\t\t\t\t\t\t\t\t: this.taskStr +=`<p>${el.task}</p>`;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.navArrow.classList.add(\"hide\");\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t} else {\t\t\t\t\r\n\t\t\t\t\t(el.state === true) ? this.taskStr +=`<p class=\"hide\"><span>${el.task}</span></p>`\r\n\t\t\t\t\t\t\t\t\t\t: this.taskStr +=`<p class=\"hide\">${el.task}</p>`;\r\n\r\n\t\t\t\t\tthis.navArrow.classList.remove(\"hide\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\t\r\n\t\tthis.taskRow.innerHTML = this.taskStr;\r\n\t}\r\n\r\n\tsetStatistic(){\r\n\t\tif(todoCache[this.date]){\r\n\t\t\tthis.total = Object.keys(todoCache[this.date]).length;\r\n\t\t\tthis.done = 0;\t\t\t\r\n\t\t\tfor(let obj of Object.values(todoCache[this.date])){\r\n\t\t\t\tif (obj.state === true) {\r\n\t\t\t\t\tthis.done += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t(this.done === this.total) ? this.statistic = `All tasks completed`\r\n\t\t\t\t\t\t\t: this.statistic = `Completed: <span class=\"completed\">${this.done}</span> of <span class=\"total\">${this.total}</span>`;\t\t\r\n\t\t} else {\r\n\t\t\tthis.total = 0;\r\n\t\t\tthis.statistic = `${this.total} task on this day`;\r\n\t\t}\t\t\t\r\n\t\tthis.statOutput.innerHTML = this.statistic;\r\n\t}\r\n\r\n\thideTasks(){\r\n\t\tthis.arr = this.scheduleItem.querySelectorAll(\"p\");\r\n\t\tif(this.arr.length > 3) {\r\n\t\t\tif(this.checkHiddenTask) {\r\n\t\t\t\tfor(let i = 3; i < this.arr.length; i++){\r\n\t\t\t\t\tthis.arr[i].classList.remove(\"hide\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkHiddenTask = false;\r\n\t\t\t\tthis.navArrow.innerHTML = \"<i class='fas fa-caret-up'></i>\";\r\n\r\n\t\t\t} else {\r\n\t\t\t\tfor(let i = 3; i < this.arr.length; i++){\r\n\t\t\t\t\tthis.arr[i].classList.add(\"hide\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkHiddenTask = true;\r\n\t\t\t\tthis.navArrow.innerHTML = \"<i class='fas fa-caret-down'></i>\";\t\t\t\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}\t\t\t\t\t\r\n\t}\t\r\n}\r\n\r\nconst todoCache = JSON.parse(localStorage.getItem(\"todoCache\")) || {};\r\nconst scheduleWrp = document.getElementById(\"schedule_wrp\");\r\nconst schedule = document.createElement(\"div\");\r\nschedule.setAttribute(\"id\", \"schedule\");\r\n\r\nfor (let i = 0, day = (new Date().getTime() - (24 * 60 * 60 * 1000)); \r\n\t\ti < 8; \r\n\t\ti++, day += (24 * 60 * 60 * 1000)){\r\n\r\n\t\tlet scheduleItem = new ScheduleItem(day, schedule);\r\n}\r\n\r\nscheduleWrp.appendChild(schedule);\r\n\r\n// ========================================\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}