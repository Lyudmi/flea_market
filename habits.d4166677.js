parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({142:[function(require,module,exports) {
var e=this,t=void 0;window.onload=function(){var e=window.indexedDB.open("habits",1);e.onerror=function(){console.log("database failed to open")},e.onsuccess=function(){console.log("database opened successfully"),t=e.result,f()},e.onupgradeneeded=function(e){var t=e.target.result.createObjectStore("habits",{keyPath:"id",autoIncrement:!0});t.createIndex("title","title",{unique:!1}),t.createIndex("type","type",{unique:!1}),t.createIndex("history","history",{unique:!1}),t.createIndex("start","start",{unique:!1}),t.createIndex("countday","countday",{unique:!1}),t.createIndex("end","end",{unique:!1}),console.log("database setup complete")},document.getElementById("form").onsubmit=w};var n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a=["January","February","March","April","May","June","July","August","September","October","November","December"],o=[31,28,31,30,31,30,31,31,30,31,30,31],d=new Date,i=d.getDay(),c=d.getDate(),l=d.getMonth(),s=d.getMonth()+1,r=d.getMonth()-1,u=d.getFullYear(),m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],y=c+" "+a[l].toLowerCase()+"  "+u+" ("+m[i].toLowerCase()+")",b=a[l]+" "+u,p="today",g=function(){document.querySelectorAll(".view-option").forEach(function(e){return e.classList.toggle("selected-view")}),document.getElementById("today-view").classList.toggle("hidden"),document.getElementById("month-view").classList.toggle("hidden")};function f(){monthTable=document.getElementById("month-table-body"),todayTable=document.getElementById("today-table-body"),monthTable.innerHTML=todayTable.innerHTML="",this.objectStore=t.transaction("habits").objectStore("habits"),this.objectStore.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,a=document.createElement("tr");L(n,a,"month-habit-title-cell","month"),E(n,a),a.setAttribute("data-habit-id",n.id),monthTable.appendChild(a);var o=document.createElement("tr");v(n,o),L(n,o,"today-habit-title-cell","daily"),o.setAttribute("data-habit-id",n.id),todayTable.appendChild(o),t.continue()}else{if(!monthTable.innerHTML){var d=document.createElement("tr"),i=document.createElement("td");i.textContent="create your habit",i.setAttribute("colspan",40),d.appendChild(i),monthTable.appendChild(d)}if(!todayTable.innerHTML){var c=document.createElement("tr"),l=document.createElement("td");l.textContent="create your habit!",l.setAttribute("colspan",40),c.appendChild(l),todayTable.appendChild(c)}}}}document.querySelectorAll(".view-option").forEach(function(t){t.addEventListener("click",function(t){e.selectedView=t.target.id,e.selectedView!==p&&(p=e.selectedView,g())})});var v=function(e,t){var n=document.createElement("td");n.classList.add("cell","checkbox-cell");var a=m[i]+" "+h[l]+" "+c+" "+u,o=e.history[a];o&&(n.classList.add(o),"complete"===o?n.innerHTML='<i class="fas fa-check"></i>':"incomplete"===o&&(n.innerHTML='<i class="fas fa-times"></i>')),n.addEventListener("click",function(){T(e.id,a)}),t.appendChild(n)},L=function(e,t,n,a){var o=document.createElement("td");o.classList.add("cell",n),o.textContent=e.title;var d=document.createElement("td");d.classList.add("counDay"),d.innerHTML="<span class='limit_day'>days ("+e.countday+")</span>",t.appendChild(o),t.appendChild(d);var i=document.createElement("button");return i.textContent="X",i.addEventListener("click",function(){M(e.id)}),"month"===a?(i.classList.add("month-delete"),o.appendChild(i)):(i.classList.add("today-delete"),o.appendChild(i)),t},E=function(e,t){var n=e.start,a=Number(""+n.getFullYear()+n.getMonth()+n.getDate()),o=e.end,d=Number(""+o.getFullYear()+o.getMonth()+o.getDate());console.log("habit start "+a),console.log("habit end "+d);for(var i=S,s=function(n){var s=Number(""+u+l+n),r=m[i]+" "+h[l]+" "+n+" "+u,y=document.createElement("td");y.classList.add("cell","daily-cell");var b=e.history[r];s===a&&y.classList.add("start-date"),s===d&&y.classList.add("end-date"),b?(y.classList.add(b),"complete"===b?y.innerHTML='<i class="fas fa-check"></i>':"incomplete"===b&&(y.innerHTML='<i class="fas fa-times"></i>')):s>=a&&n<c&&!b&&(b="incomplete",y.classList.add("incomplete"),y.innerHTML='<i class="fas fa-times"></i>'),n>=c&&n<=c&&y.addEventListener("click",function(){T(e.id,r)}),s===d&&(y.addEventListener("click",function(){C(e.id,o)}),y.classList.add("end-date")),t.appendChild(y)},r=1;r<=x;r++)s(r)};function w(e){e.preventDefault();var n=document.getElementById("habit_title").value,a=document.getElementById("count-day").value,o=new Date;o.setDate(o.getDate()+Number(a)),this.endday=o.getDate(),console.log(a),console.log(o),console.log(this.endday);var d={title:n,type:"daily",history:{},start:new Date,countday:a,end:o},i=t.transaction(["habits"],"readwrite");i.objectStore("habits").add(d).onsuccess=function(){document.getElementById("habit_title").value="",document.getElementById("count-day").value=1},i.oncomplete=function(){console.log("transaction complete: database modification finished"),f()},i.onerror=function(){console.log("transaction not opened due to error")}}function T(e,n){var a=t.transaction(["habits"],"readwrite").objectStore("habits"),o=a.get(e);o.onsuccess=function(){var e=o.result,t=e.history[n],d=void 0;d="complete"===t?"incomplete":"incomplete"===t?null:"complete",e.history[n]=d,a.put(e).onsuccess=function(){f(),console.log("habit save")}}}function C(e,n){var a=t.transaction(["habits"],"readwrite").objectStore("habits").get(e);a.onsuccess=function(){var e=a.result;console.log("endHabit"+e);var t=e.end;console.log("history"+t),alert("Congratulations! Now you have a new habit!")}}function M(e){t.transaction(["habits"],"readwrite").objectStore("habits").delete(e).onsuccess=function(){console.log("habit successfully deleted"),f()}}var D=function(){for(var e=d.getDate(),t=0,n=d.getDay(),a=e;a>0;a--)-1===n&&(n=6),1===a&&(t=n),n--;return t},I=document.getElementById("date-header-row"),S=D(),x=o[l],A=function(){for(var e=1;e<=x;e++){var t=document.createElement("td");t.classList.add("cell","date-cell"),t.textContent=e,e===c&&t.classList.add("highlight"),I.appendChild(t)}for(var a=document.querySelectorAll(".date-cell"),o=0;o<a.length;o++){var d=document.createElement("div");d.textContent=n[o%7],a[o].prepend(d)}};A();
},{}]},{},[142], null)
//# sourceMappingURL=/habits.d4166677.map