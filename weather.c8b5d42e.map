{"version":3,"sources":["0","js\\loc&WeatherApi.js","js\\weather.js"],"names":["module","exports","weatherApiKey","LocationApi","ipCache","JSON","parse","localStorage","getItem","Date","now","timestamp","Promise","resolve","data","setItem","stringify","fetch","then","res","status","json","reject","LocalStorageApi","i","length","key","keyValue","j","removeItem","Weather","city","weatherCache","apiKeys","Dom","preloader","document","getElementsByClassName","locationBlock","getElementById","country","classList","remove","add","coordinates","innerHTML","location","name","weatherData","weather_today","weekday","querySelector","date","weatherIcon","description","tempMax","tempMin","humidity","pressure","winds","forecast","forecastday","day","toLocaleString","src","current","condition","icon","text","temp_c","mintemp_c","pressure_mb","wind_kph","toFixed","weather_item","maxtemp_c","error","errorMessage","inputCity","value","test","hidePreloader","onkeyup","loc","weather","dom","storage","btnWeather","getWeatherByCity","showPreloader","getWeather","setWeatherToday","setWeatherForecast","setLocation","catch","log","showError","window","onload","removeStorageItem","getMyLocation","rej","addEventListener","keyCode"],"mappings":";;AAAAA,OAAOC,QAAU,CAAEC,cAAe;;;AEwDlC,aAxDA,IAAA,EAAA,QAAA,uBAEMiF,EAAM,IAAIhF,EAAJ,YACNiF,EAAU,IAAItD,EAAJ,QACVuD,EAAM,IAAInD,EAAJ,IACNoD,EAAU,IAAI/D,EAAJ,gBACVgE,EAAanD,SAASG,eAAe,WACrCuC,EAAY1C,SAASG,eAAe,cAyB1C,SAASiD,IACCV,IAAAA,EAAY1C,SAASG,eAAe,cACvC,aAAayC,KAAKF,EAAUC,QACvBU,EAAAA,gBACIC,EAAAA,WAAWZ,EAAUC,OACxB7D,KAAK,SAAO,GACLyE,EAAAA,gBAAgBxE,GAChByE,EAAAA,mBAAmBzE,GACnB0E,EAAAA,YAAY1E,KAEnBD,KAAK,SAAA,GAAOmE,OAAAA,EAAIJ,kBAEhBa,MAAM,SAAS,GACRL,EAAAA,gBACIM,QAAAA,IAAInB,GACRoB,EAAAA,UAAUpB,MAGlBoB,EAAAA,UAAUpB,OAzCtBqB,OAAOC,OAAS,WACRT,EAAAA,gBACIU,EAAAA,oBACJC,EAAAA,gBACCN,MAAM,SAAO,GAEH,OADCC,QAAAA,IAAI,SAAUM,GACf,CAAE,KAAS,aAErBnF,KAAK,SAAA,GAAOkE,OAAAA,EAAQM,WAAWvE,EAAIY,QACnCb,KAAK,SAAO,GACLyE,EAAAA,gBAAgBxE,GAChByE,EAAAA,mBAAmBzE,GACnB0E,EAAAA,YAAY1E,GACZ8D,EAAAA,kBAGPa,MAAM,SAAS,GACRb,EAAAA,gBACWL,MAAAA,SAAAA,EAAf,qDACQmB,QAAAA,IAAI,SAAUnB,MA0BlCW,EAAWe,iBAAiB,QAASd,GAErCV,EAAUwB,iBAAiB,QAAS,SAAC5E,GACd,KAAhBA,EAAI6E,SACHf;AD0JH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,IAAA,QAAA,QAAA,QAAA,gBAAA,QAAA,iBAAA,EAAA,IAAA,EAAA,WAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,OAAA,SAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,GAAA,GApNL,EAAA,QAAA,iBAoNK,EAAA,EAAA,GAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCA9MQrF,IAAAA,EAAAA,QAAAA,YAAAA,WA8MR,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,gBA7Mc,MAAA,WACLC,IAAAA,EAAUC,KAAKC,MAAMC,aAAaC,QAAQ,aAAe,GAC3DJ,GAAAA,EAAA,SAAqB,CACjBK,GAAAA,KAAKC,MAAQN,EAAA,SAAoBO,UAAY,KACtCC,OAAAA,QAAQC,QAAQT,EAAA,SAAoBU,MAGnC,EAAR,SAAsB,KACTC,aAAAA,QAAQ,UAAWV,KAAKW,UAAUZ,IAKhDa,OAAAA,MACNC,0BAAAA,KAAK,SAAO,GACNC,OAAe,MAAfA,EAAIC,OACID,EAAIE,OAGRT,QAAQU,OAAOH,EAAIC,UAG7BF,KAAK,SAACJ,GAOQA,OANC,EAAR,SAAsB,CACPL,UAAAA,KAAKC,MAChBI,KAAAA,GAESC,aAAAA,QAAQ,UAAWV,KAAKW,UAAUZ,IAExCU,QAgLlB,EA9MQX,GAwCAoB,EAAAA,QAAAA,gBAAAA,WAsKR,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,oBArKkB,MAAA,WACV,IAAA,IAAIC,EAAI,EAAGA,EAAIjB,aAAakB,OAAQD,IAAK,CACtCE,IAAAA,EAAMnB,aAAamB,IAAIF,GACvBG,EAAYtB,KAAKC,MAAMC,aAAaC,QAAQkB,IAC3C,IAAA,IAAIE,KAAKD,EACNlB,KAAKC,MAAQiB,EAASC,GAAGjB,UAAY,MACxBkB,aAAAA,WAAWH,QA+JvC,EAtKQH,GAkBAO,EAAAA,QAAAA,QAAAA,WAoJR,SAAA,IAAA,EAAA,KAAA,GAAA,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,aAnJUC,MAAAA,SAAAA,GACDC,IAAAA,EAAe3B,KAAKC,MAAMC,aAAaC,QAAQ,kBAAoB,GACrEwB,GAAAA,EAAaD,GAAO,CAChBtB,GAAAA,KAAKC,MAAQsB,EAAaD,GAAMpB,UAAY,KACrCC,OAAAA,QAAQC,QAAQmB,EAAaD,GAAMjB,MAG7BiB,EAAAA,GAAQ,KACRhB,aAAAA,QAAQ,eAAgBV,KAAKW,UAAUgB,IAKrDf,OAAAA,MAAoDgB,8CAAAA,EAAQ/B,QAAAA,cAAmB6B,MAAAA,EACrFb,mBAAAA,KAAK,SAAO,GACNC,OAAe,MAAfA,EAAIC,OACID,EAAIE,OAGRT,QAAQU,OAAOH,EAAIC,UAG7BF,KAAK,SAACJ,GAOQA,OANMiB,EAAAA,GAAQ,CACNtB,UAAAA,KAAKC,MAChBI,KAAAA,GAESC,aAAAA,QAAQ,eAAgBV,KAAKW,UAAUgB,IAE7ClB,QAsHlB,EApJQgB,GAuCAI,EAAAA,QAAAA,IAAAA,WACI,SAAA,IAAA,EAAA,KAAA,GACJC,KAAAA,UAAYC,SAASC,uBAAuB,aAC5CC,KAAAA,cAAiBF,SAASG,eAAe,kBACzCC,KAAAA,QAAUJ,SAASG,eAAe,WAClCR,KAAAA,KAAOK,SAASG,eAAe,QAwGvC,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,gBArGe,MAAA,WAAA,IAAA,EAAA,KACD,WAAA,WACF,IAAA,IAAIf,EAAI,EAAGA,EAAI,EAAKW,UAAUV,OAAQD,GAAK,EACvCW,EAAAA,UAAUX,GAAGiB,UAAUC,OAAO,SAExC,OAgGN,CAAA,IAAA,gBA7Fe,MAAA,WAAA,IAAA,EAAA,KACD,WAAA,WACF,IAAA,IAAIlB,EAAI,EAAGA,EAAI,EAAKW,UAAUV,OAAQD,GAAK,EACvCW,EAAAA,UAAUX,GAAGiB,UAAUE,IAAI,SAErC,OAwFN,CAAA,IAAA,cArFWC,MAAAA,SAAAA,GACHJ,KAAAA,QAAQK,UAAYD,EAAYE,SAASN,QACzCT,KAAAA,KAAKc,UAAYD,EAAYE,SAASC,OAmF9C,CAAA,IAAA,kBAhFeC,MAAAA,SAAAA,GACNC,IAAAA,EAAgBb,SAASG,eAAe,iBACzCW,KAAAA,QAAWD,EAAcE,cAAc,qBACvCC,KAAAA,KAAQH,EAAcE,cAAc,kBACpCE,KAAAA,YAAeJ,EAAcE,cAAc,0BAC3CG,KAAAA,YAAcL,EAAcE,cAAc,yBAC1CI,KAAAA,QAAWN,EAAcE,cAAc,sBACvCK,KAAAA,QAAWP,EAAcE,cAAc,sBACvCM,KAAAA,SAAWR,EAAcE,cAAc,sBACvCO,KAAAA,SAAWT,EAAcE,cAAc,sBACvCQ,KAAAA,MAAQV,EAAcE,cAAc,kBAEpCC,KAAAA,KAAKP,UAAYG,EAAYY,SAASC,YAAY,GAAGT,KACrDU,KAAAA,IAAM,IAAIrD,KAAK,KAAK2C,KAAKP,WACzBK,KAAAA,QAAQL,UAAY,KAAKiB,IAAIC,eAAe,KAAM,CAACb,QAAS,UAC5DG,KAAAA,YAAYW,IAAM,QAAUhB,EAAYiB,QAAQC,UAAUC,KAC1Db,KAAAA,YAAYT,UAAYG,EAAYiB,QAAQC,UAAUE,KACtDb,KAAAA,QAAQV,UAAYG,EAAYiB,QAAQI,OAAS,MACjDb,KAAAA,QAAQX,UAAYG,EAAYY,SAASC,YAAY,GAAGC,IAAIQ,UAAY,MACxEb,KAAAA,SAASZ,UAAYG,EAAYiB,QAAQR,SAAW,KACpDC,KAAAA,SAASb,UAAYG,EAAYiB,QAAQM,YAAc,OACvDZ,KAAAA,MAAMd,WAAaG,EAAYiB,QAAQO,SAAW,KAAKC,QAAQ,GAAK,SA2D5E,CAAA,IAAA,qBAxDkBzB,MAAAA,SAAAA,GAEV,IADC0B,IAAAA,EAAetC,SAASC,uBAAuB,gBAC5Cb,EAAI,EAAGA,EAAIkD,EAAajD,OAAQD,IAChC0B,KAAAA,QAAWwB,EAAalD,GAAG2B,cAAc,qBACzCC,KAAAA,KAAQsB,EAAalD,GAAG2B,cAAc,kBACtCE,KAAAA,YAAeqB,EAAalD,GAAG2B,cAAc,0BAC7CI,KAAAA,QAAWmB,EAAalD,GAAG2B,cAAc,sBACzCK,KAAAA,QAAWkB,EAAalD,GAAG2B,cAAc,sBAEzCC,KAAAA,KAAKP,UAAYG,EAAYY,SAASC,YAAYrC,EAAI,GAAG4B,KACzDU,KAAAA,IAAM,IAAIrD,KAAK,KAAK2C,KAAKP,WACzBK,KAAAA,QAAQL,UAAY,KAAKiB,IAAIC,eAAe,KAAM,CAACb,QAAS,UAC5DG,KAAAA,YAAYW,IAAM,QAAUhB,EAAYY,SAASC,YAAYrC,EAAI,GAAGsC,IAAII,UAAUC,KAClFZ,KAAAA,QAAQV,UAAYG,EAAYY,SAASC,YAAYrC,EAAI,GAAGsC,IAAIa,UAAY,MAC5EnB,KAAAA,QAAQX,UAAYG,EAAYY,SAASC,YAAYrC,EAAI,GAAGsC,IAAIQ,UAAY,QA0CxF,CAAA,IAAA,iBAtCctB,MAAAA,SAAAA,GACLC,IAAAA,EAAgBb,SAASG,eAAe,iBACzCc,KAAAA,YAAeJ,EAAcE,cAAc,0BAC3CG,KAAAA,YAAcL,EAAcE,cAAc,yBAC1CI,KAAAA,QAAWN,EAAcE,cAAc,sBACvCK,KAAAA,QAAWP,EAAcE,cAAc,sBAEvCE,KAAAA,YAAYW,IAAM,QAAUhB,EAAYiB,QAAQC,UAAUC,KAC1Db,KAAAA,YAAYT,UAAYG,EAAYiB,QAAQC,UAAUE,KACtDb,KAAAA,QAAQV,UAAYG,EAAYiB,QAAQI,OAAS,MACjDb,KAAAA,QAAQX,UAAYG,EAAYY,SAASC,YAAY,GAAGC,IAAIQ,UAAY,QA4BhF,CAAA,IAAA,YAzBSM,MAAAA,SAAAA,GAAM,IAAA,EAAA,KACPC,KAAAA,aAAezC,SAASG,eAAe,SACvCuC,KAAAA,UAAY1C,SAASG,eAAe,cACrC,KAAKuC,UAAUC,MAIP,aAAaC,KAAK,KAAKF,UAAUC,OAIxB,MAAVH,GACFC,KAAAA,aAAahC,UAAqB+B,SAAAA,EAAvC,oDACKE,KAAAA,UAAUrC,UAAUE,IAAI,UAExBkC,KAAAA,aAAahC,UAAqB+B,SAAAA,EAAvC,sDAPKC,KAAAA,aAAahC,UAAlB,2CACKiC,KAAAA,UAAUrC,UAAUE,IAAI,WALxBkC,KAAAA,aAAahC,UAAY,oBACzBiC,KAAAA,UAAUrC,UAAUE,IAAI,UAa5BkC,KAAAA,aAAapC,UAAUC,OAAO,QAC9BuC,KAAAA,gBAEAH,KAAAA,UAAUI,QAAU,WAChBL,EAAAA,aAAapC,UAAUE,IAAI,QAC3BmC,EAAAA,UAAUrC,UAAUC,OAAO,cAEvC,EA7GQR","file":"weather.c8b5d42e.map","sourceRoot":"..\\src","sourcesContent":[null,"import apiKeys from \"./config.json\";\r\n\r\n// =======================\r\n// locationApi\r\n// =======================\r\n          \r\nexport class LocationApi {\r\n    getMyLocation(){\r\n        const ipCache = JSON.parse(localStorage.getItem(\"ipCache\")) || {};\r\n        if (ipCache[\"location\"]) {\r\n            if (Date.now() - ipCache[\"location\"].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(ipCache[\"location\"].data);\r\n\r\n            } else {\r\n                ipCache[\"location\"] = null;\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n            }\r\n        }\r\n\r\n        \r\n        return fetch(`http://ip-api.com/json`)\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            }\r\n\r\n            return Promise.reject(res.status);\r\n        })\r\n\r\n        .then((data) => {\r\n                ipCache[\"location\"] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n\r\n}\r\n\r\n// =======================\r\n// localStorageApi\r\n// =======================\r\n\r\nexport class LocalStorageApi {\r\n    removeStorageItem(){\r\n        for (let i = 0; i < localStorage.length; i++) {\r\n            let key = localStorage.key(i);\r\n            let keyValue =  JSON.parse(localStorage.getItem(key)); \r\n            for (let j in keyValue) {\r\n                if (Date.now() - keyValue[j].timestamp > 1000 * 60 * 20) {\r\n                    localStorage.removeItem(key);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// =======================\r\n// weatherApi\r\n// =======================\r\n\r\nexport class Weather {\r\n    getWeather(city){\r\n        const weatherCache = JSON.parse(localStorage.getItem(\"weatherCache\")) || {};\r\n        if (weatherCache[city]) {\r\n            if (Date.now() - weatherCache[city].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(weatherCache[city].data);\r\n\r\n            } else {\r\n                weatherCache[city] = null;\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n            }\r\n        }\r\n\r\n        \r\n        return fetch(`https://api.apixu.com/v1/forecast.json?key=${apiKeys.weatherApiKey}&q=${city}&days=6&lang=en`)\r\n       \t.then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            } \r\n            \r\n            return Promise.reject(res.status);\r\n\t\t})\r\n\r\n        .then((data) => {\r\n                weatherCache[city] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n}\r\n\r\n// =======================\r\n// domApi\r\n// =======================\r\n\r\nexport class Dom {\r\n    constructor(){\r\n        this.preloader = document.getElementsByClassName(\"preloader\");\r\n        this.locationBlock =  document.getElementById(\"location_block\");\r\n        this.country = document.getElementById(\"country\");\r\n        this.city = document.getElementById(\"city\");\r\n    }\r\n\r\n    showPreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.remove(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    hidePreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.add(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    setLocation(coordinates) {\r\n        this.country.innerHTML = coordinates.location.country;\r\n        this.city.innerHTML = coordinates.location.name;\r\n    }\r\n\r\n    setWeatherToday(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weekday =  weather_today.querySelector(\"[class='weekday']\");\r\n        this.date =  weather_today.querySelector(\"[class='date']\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        this.humidity = weather_today.querySelector(\"[class='humidity']\");\r\n        this.pressure = weather_today.querySelector(\"[class='pressure']\");\r\n        this.winds = weather_today.querySelector(\"[class='wind']\");\r\n\r\n        this.date.innerHTML = weatherData.forecast.forecastday[0].date;\r\n        this.day = new Date(this.date.innerHTML);\r\n        this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n        this.humidity.innerHTML = weatherData.current.humidity + \" %\";\r\n        this.pressure.innerHTML = weatherData.current.pressure_mb + \" hPa\";\r\n        this.winds.innerHTML = (weatherData.current.wind_kph / 3.6).toFixed(1) + \" m/s\";\r\n    }\r\n\r\n    setWeatherForecast(weatherData){\r\n        const weather_item = document.getElementsByClassName(\"weather_item\");\r\n        for (let i = 0; i < weather_item.length; i++){\r\n            this.weekday =  weather_item[i].querySelector(\"[class='weekday']\");\r\n            this.date =  weather_item[i].querySelector(\"[class='date']\");\r\n            this.weatherIcon =  weather_item[i].querySelector(\"[class='weather_icon']\");\r\n            this.tempMax =  weather_item[i].querySelector(\"[class='temp_max']\");\r\n            this.tempMin =  weather_item[i].querySelector(\"[class='temp_min']\");\r\n            \r\n            this.date.innerHTML = weatherData.forecast.forecastday[i + 1].date;\r\n            this.day = new Date(this.date.innerHTML);\r\n            this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n            this.weatherIcon.src = \"http:\" + weatherData.forecast.forecastday[i + 1].day.condition.icon;\r\n            this.tempMax.innerHTML = weatherData.forecast.forecastday[i + 1].day.maxtemp_c + \" ºC\";\r\n            this.tempMin.innerHTML = weatherData.forecast.forecastday[i + 1].day.mintemp_c + \" ºC\";\r\n        }\r\n    }\r\n\r\n    setWeatherMain(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        \r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n    }\r\n\r\n    showError(error){\r\n        this.errorMessage = document.getElementById(\"error\");\r\n        this.inputCity = document.getElementById(\"input_city\");\r\n        if(!this.inputCity.value) {\r\n            this.errorMessage.innerHTML = \"Please, type city\";\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (!/^[A-z]{1,}/.test(this.inputCity.value)) {\r\n            this.errorMessage.innerHTML = `Please, type city with Latin characters.`;\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (error === 400) {            \r\n            this.errorMessage.innerHTML = `Error ${error}. No location is found. Please, type correct city`;\r\n            this.inputCity.classList.add(\"error\");\r\n        } else {\r\n            this.errorMessage.innerHTML = `Error ${error}. Server is not available. Please, try again later`;\r\n        }\r\n\r\n        this.errorMessage.classList.remove(\"done\");\r\n        this.hidePreloader();\r\n\r\n        this.inputCity.onkeyup = () => {\r\n            this.errorMessage.classList.add(\"done\");\r\n            this.inputCity.classList.remove(\"error\");\r\n        }\r\n    }\r\n}\r\n\r\n","import { LocationApi, LocalStorageApi, Weather, Dom } from \"./loc&WeatherApi.js\";\r\n\r\nconst loc = new LocationApi();\r\nconst weather = new Weather();\r\nconst dom = new Dom();\r\nconst storage = new LocalStorageApi();\r\nconst btnWeather = document.getElementById(\"weather\");\r\nconst inputCity = document.getElementById(\"input_city\");\r\n\r\nwindow.onload = () => {\r\n    dom.showPreloader();\r\n    storage.removeStorageItem();\r\n    loc.getMyLocation()\r\n        .catch(rej => {\r\n            console.log('Error:', rej);\r\n            return { \"city\" : \"Poltava\"}\r\n        })\r\n        .then(res => weather.getWeather(res.city))\r\n        .then(res => {\r\n            dom.setWeatherToday(res);\r\n            dom.setWeatherForecast(res);\r\n            dom.setLocation(res);\r\n            dom.hidePreloader();\r\n        })\r\n         \r\n        .catch(error => {\r\n            dom.hidePreloader();\r\n            alert(`Error ${error}. Sever is not available. Please, try again later`);\r\n            console.log('Error:', error);\r\n        });\r\n}\r\n\r\nfunction getWeatherByCity() {\r\n    const inputCity = document.getElementById(\"input_city\");\r\n    if(/^[A-z]{1,}/.test(inputCity.value)) {\r\n        dom.showPreloader();\r\n        weather.getWeather(inputCity.value)\r\n            .then(res => {\r\n                dom.setWeatherToday(res);\r\n                dom.setWeatherForecast(res);\r\n                dom.setLocation(res);\r\n            })\r\n            .then(res => dom.hidePreloader())\r\n\r\n            .catch(error => {\r\n                dom.showPreloader();\r\n                console.log(error);\r\n                dom.showError(error);\r\n            });\r\n    } else {\r\n        dom.showError(error);\r\n    }\r\n}\r\n\r\nbtnWeather.addEventListener(\"click\", getWeatherByCity);\r\n\r\ninputCity.addEventListener(\"keyup\", (key) => {\r\n    if(key.keyCode === 13) {\r\n        getWeatherByCity();\r\n    }\r\n})\r\n\r\n\r\n"]}