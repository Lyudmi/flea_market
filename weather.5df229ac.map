{"version":3,"sources":["0","js\\loc&WeatherApi.js","js\\weather.js"],"names":["module","exports","locationApiKey","weatherApiKey","LocationApi","fetch","then","res","status","json","Promise","reject","my_ip","ipCache","JSON","parse","localStorage","getItem","Date","now","timestamp","resolve","data","setItem","stringify","apiKeys","LocalStorageApi","i","length","key","keyValue","j","removeItem","Weather","city","weatherCache","Dom","preloader","document","getElementsByClassName","locationBlock","getElementById","country","classList","remove","add","coordinates","innerHTML","location","name","weatherData","weather_today","weekday","querySelector","date","weatherIcon","description","tempMax","tempMin","humidity","pressure","winds","forecast","forecastday","day","toLocaleString","src","current","condition","icon","text","temp_c","mintemp_c","pressure_mb","wind_kph","toFixed","weather_item","maxtemp_c","error","errorMessage","inputCity","value","test","hidePreloader","onkeyup","loc","weather","dom","storage","btnWeather","getWeatherByCity","showPreloader","getWeather","setWeatherToday","setWeatherForecast","setLocation","catch","log","showError","window","onload","removeStorageItem","getMyIp","getMyLocation","ip","addEventListener","keyCode"],"mappings":"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","file":"weather.5df229ac.map","sourceRoot":"..\\src","sourcesContent":[null,"import apiKeys from \"./config.json\";\r\n\r\n// =======================\r\n// locationApi\r\n// =======================\r\n          \r\nexport class LocationApi {\r\n    getMyIp () {\r\n        return fetch(\"https://api.ipify.org?format=json\")\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            }\r\n\r\n            return Promise.reject(res.status);\r\n        })\r\n    }\r\n\r\n    getMyLocation(my_ip){\r\n        const ipCache = JSON.parse(localStorage.getItem(\"ipCache\")) || {};\r\n        if (ipCache[my_ip]) {\r\n            if (Date.now() - ipCache[my_ip].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(ipCache[my_ip].data);\r\n\r\n            } else {\r\n                ipCache[my_ip] = null;\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n            }\r\n        }\r\n\r\n        // const access_key = \"d7e18e707400c1adebbaa807b91efaf4\";\r\n        return fetch(`http://api.ipstack.com/${my_ip}?access_key=${apiKeys.locationApiKey}`)\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            }\r\n\r\n            return Promise.reject(res.status);\r\n        })\r\n\r\n        .then((data) => {\r\n                ipCache[my_ip] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n\r\n}\r\n\r\n// =======================\r\n// localStorageApi\r\n// =======================\r\n\r\nexport class LocalStorageApi {\r\n    removeStorageItem(){\r\n        for (let i = 0; i < localStorage.length; i++) {\r\n            let key = localStorage.key(i);\r\n            // console.log(key);\r\n            let keyValue =  JSON.parse(localStorage.getItem(key)); \r\n            // console.log(keyValue);\r\n            for (let j in keyValue) {\r\n                if (Date.now() - keyValue[j].timestamp > 1000 * 60 * 20) {\r\n                    localStorage.removeItem(key);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// =======================\r\n// weatherApi\r\n// =======================\r\n\r\nexport class Weather {\r\n    getWeather(city){\r\n        const weatherCache = JSON.parse(localStorage.getItem(\"weatherCache\")) || {};\r\n        if (weatherCache[city]) {\r\n            if (Date.now() - weatherCache[city].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(weatherCache[city].data);\r\n\r\n            } else {\r\n                weatherCache[city] = null;\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n            }\r\n        }\r\n\r\n        // const api_key = \"f79e38a9176442b59ae105655180707\";\r\n        return fetch(`http://api.apixu.com/v1/forecast.json?key=${apiKeys.weatherApiKey}&q=${city}&days=6&lang=en`)\r\n       \t.then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            } \r\n            \r\n            return Promise.reject(res.status);\r\n\t\t})\r\n\r\n        .then((data) => {\r\n                weatherCache[city] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n}\r\n\r\n// =======================\r\n// domApi\r\n// =======================\r\n\r\nexport class Dom {\r\n    constructor(){\r\n        this.preloader = document.getElementsByClassName(\"preloader\");\r\n        this.locationBlock =  document.getElementById(\"location_block\");\r\n        this.country = document.getElementById(\"country\");\r\n        this.city = document.getElementById(\"city\");\r\n    }\r\n\r\n    showPreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.remove(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    hidePreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.add(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    setLocation(coordinates) {\r\n        this.country.innerHTML = coordinates.location.country;\r\n        this.city.innerHTML = coordinates.location.name;\r\n    }\r\n\r\n    setWeatherToday(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weekday =  weather_today.querySelector(\"[class='weekday']\");\r\n        this.date =  weather_today.querySelector(\"[class='date']\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        this.humidity = weather_today.querySelector(\"[class='humidity']\");\r\n        this.pressure = weather_today.querySelector(\"[class='pressure']\");\r\n        this.winds = weather_today.querySelector(\"[class='wind']\");\r\n\r\n        this.date.innerHTML = weatherData.forecast.forecastday[0].date;\r\n        this.day = new Date(this.date.innerHTML);\r\n        this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n        this.humidity.innerHTML = weatherData.current.humidity + \" %\";\r\n        this.pressure.innerHTML = weatherData.current.pressure_mb + \" hPa\";\r\n        this.winds.innerHTML = (weatherData.current.wind_kph / 3.6).toFixed(1) + \" m/s\";\r\n    }\r\n\r\n    setWeatherForecast(weatherData){\r\n        const weather_item = document.getElementsByClassName(\"weather_item\");\r\n        for (let i = 0; i < weather_item.length; i++){\r\n            this.weekday =  weather_item[i].querySelector(\"[class='weekday']\");\r\n            this.date =  weather_item[i].querySelector(\"[class='date']\");\r\n            this.weatherIcon =  weather_item[i].querySelector(\"[class='weather_icon']\");\r\n            this.tempMax =  weather_item[i].querySelector(\"[class='temp_max']\");\r\n            this.tempMin =  weather_item[i].querySelector(\"[class='temp_min']\");\r\n            \r\n            this.date.innerHTML = weatherData.forecast.forecastday[i + 1].date;\r\n            this.day = new Date(this.date.innerHTML);\r\n            this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n            this.weatherIcon.src = \"http:\" + weatherData.forecast.forecastday[i + 1].day.condition.icon;\r\n            this.tempMax.innerHTML = weatherData.forecast.forecastday[i + 1].day.maxtemp_c + \" ºC\";\r\n            this.tempMin.innerHTML = weatherData.forecast.forecastday[i + 1].day.mintemp_c + \" ºC\";\r\n        }\r\n    }\r\n\r\n    setWeatherMain(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        \r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n    }\r\n\r\n    showError(error){\r\n        this.errorMessage = document.getElementById(\"error\");\r\n        this.inputCity = document.getElementById(\"input_city\");\r\n        if(!this.inputCity.value) {\r\n            this.errorMessage.innerHTML = \"Please, type city\";\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (!/^[A-z]{1,}/.test(this.inputCity.value)) {\r\n            this.errorMessage.innerHTML = `Please, type city with Latin characters.`;\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (error === 400) {            \r\n            this.errorMessage.innerHTML = `Error ${error}. No location is found. Please, type correct city`;\r\n            this.inputCity.classList.add(\"error\");\r\n        } else {\r\n            this.errorMessage.innerHTML = `Error ${error}. Server is not available. Please, try again later`;\r\n        }\r\n\r\n        this.errorMessage.classList.remove(\"done\");\r\n        this.hidePreloader();\r\n\r\n        this.inputCity.onkeyup = () => {\r\n            this.errorMessage.classList.add(\"done\");\r\n            this.inputCity.classList.remove(\"error\");\r\n        }\r\n    }\r\n}\r\n\r\n","import { LocationApi, LocalStorageApi, Weather, Dom } from \"./loc&WeatherApi.js\";\r\n\r\nconst loc = new LocationApi();\r\nconst weather = new Weather();\r\nconst dom = new Dom();\r\nconst storage = new LocalStorageApi();\r\nconst btnWeather = document.getElementById(\"weather\");\r\nconst inputCity = document.getElementById(\"input_city\");\r\n\r\nwindow.onload = () => {\r\n    dom.showPreloader();\r\n    storage.removeStorageItem();\r\n    loc.getMyIp()\r\n        .then(res => loc.getMyLocation(res.ip))\r\n        .then(res => weather.getWeather(res.city))\r\n        .then(res => {\r\n            dom.setWeatherToday(res);\r\n            dom.setWeatherForecast(res);\r\n            dom.setLocation(res);\r\n            dom.hidePreloader();\r\n        })\r\n         \r\n        .catch(error => {\r\n            console.log(error);\r\n            alert(`Error ${error}. Sever is not available. Please, try again later`);\r\n        });\r\n}\r\n\r\nfunction getWeatherByCity() {\r\n    const inputCity = document.getElementById(\"input_city\");\r\n    if(/^[A-z]{1,}/.test(inputCity.value)) {\r\n        dom.showPreloader();\r\n        weather.getWeather(inputCity.value)\r\n            .then(res => {\r\n                dom.setWeatherToday(res);\r\n                dom.setWeatherForecast(res);\r\n                dom.setLocation(res);\r\n            })\r\n            .then(res => dom.hidePreloader())\r\n\r\n            .catch(error => {\r\n                console.log(error);\r\n                dom.showError(error);\r\n            });\r\n    } else {\r\n        dom.showError(error);\r\n    }\r\n}\r\n\r\nbtnWeather.addEventListener(\"click\", getWeatherByCity);\r\n\r\ninputCity.addEventListener(\"keyup\", (key) => {\r\n    if(key.keyCode === 13) {\r\n        getWeatherByCity();\r\n    }\r\n})\r\n\r\n\r\n"]}