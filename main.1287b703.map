{"version":3,"sources":["0","js\\loc&WeatherApi.js","js\\main.js"],"names":["module","exports","locationApiKey","weatherApiKey","LocationApi","fetch","then","res","status","json","Promise","reject","my_ip","ipCache","JSON","parse","localStorage","getItem","Date","now","timestamp","resolve","data","setItem","stringify","apiKeys","LocalStorageApi","i","length","key","keyValue","j","removeItem","Weather","city","weatherCache","Dom","preloader","document","getElementsByClassName","locationBlock","getElementById","country","classList","remove","add","coordinates","innerHTML","location","name","weatherData","weather_today","weekday","querySelector","date","weatherIcon","description","tempMax","tempMin","humidity","pressure","winds","forecast","forecastday","day","toLocaleString","src","current","condition","icon","text","temp_c","mintemp_c","pressure_mb","wind_kph","toFixed","weather_item","maxtemp_c","error","errorMessage","inputCity","value","test","hidePreloader","onkeyup","setDateMain","time","toLocaleTimeString","toLocaleDateString","dom","weather","loc","storage","loadDateAndLocation","showPreloader","setDate","removeStorageItem","getMyIp","getMyLocation","ip","getWeather","setLocation","setWeatherMain","window","onload","SheduleItem","parent","split","reverse","join","sheduleItem","createElement","dayMonth","taskDate","appendChild","taskRow","statOutput","taskSet","setTasks","setStatistic","checkHiddenTask","onclick","hideTasks","bind","textContent","toDateString","slice","taskStr","todoCache","taskArr","Object","values","map","el","indexOf","state","task","total","keys","done","statistic","arr","querySelectorAll","sheduleWrp","shedule","setAttribute","getTime"],"mappings":"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","file":"main.1287b703.map","sourceRoot":"..\\src","sourcesContent":[null,"import apiKeys from \"./config.json\";\r\n\r\n// =======================\r\n// locationApi\r\n// =======================\r\n          \r\nexport class LocationApi {\r\n    getMyIp () {\r\n        return fetch(\"https://api.ipify.org?format=json\")\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            }\r\n\r\n            return Promise.reject(res.status);\r\n        })\r\n    }\r\n\r\n    getMyLocation(my_ip){\r\n        const ipCache = JSON.parse(localStorage.getItem(\"ipCache\")) || {};\r\n        if (ipCache[my_ip]) {\r\n            if (Date.now() - ipCache[my_ip].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(ipCache[my_ip].data);\r\n\r\n            } else {\r\n                ipCache[my_ip] = null;\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n            }\r\n        }\r\n\r\n        \r\n        return fetch(`https://api.ipstack.com/${my_ip}?access_key=${apiKeys.locationApiKey}`)\r\n        .then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            }\r\n\r\n            return Promise.reject(res.status);\r\n        })\r\n\r\n        .then((data) => {\r\n                ipCache[my_ip] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"ipCache\", JSON.stringify(ipCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n\r\n}\r\n\r\n// =======================\r\n// localStorageApi\r\n// =======================\r\n\r\nexport class LocalStorageApi {\r\n    removeStorageItem(){\r\n        for (let i = 0; i < localStorage.length; i++) {\r\n            let key = localStorage.key(i);\r\n            // console.log(key);\r\n            let keyValue =  JSON.parse(localStorage.getItem(key)); \r\n            // console.log(keyValue);\r\n            for (let j in keyValue) {\r\n                if (Date.now() - keyValue[j].timestamp > 1000 * 60 * 20) {\r\n                    localStorage.removeItem(key);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// =======================\r\n// weatherApi\r\n// =======================\r\n\r\nexport class Weather {\r\n    getWeather(city){\r\n        const weatherCache = JSON.parse(localStorage.getItem(\"weatherCache\")) || {};\r\n        if (weatherCache[city]) {\r\n            if (Date.now() - weatherCache[city].timestamp < 1000 * 60 * 20) {\r\n                return Promise.resolve(weatherCache[city].data);\r\n\r\n            } else {\r\n                weatherCache[city] = null;\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n            }\r\n        }\r\n\r\n        \r\n        return fetch(`https://api.apixu.com/v1/forecast.json?key=${apiKeys.weatherApiKey}&q=${city}&days=6&lang=en`)\r\n       \t.then(res => {\r\n            if(res.status === 200){\r\n                return res.json();\r\n            } \r\n            \r\n            return Promise.reject(res.status);\r\n\t\t})\r\n\r\n        .then((data) => {\r\n                weatherCache[city] = {\r\n                    timestamp: Date.now(),\r\n                    data,\r\n                };\r\n                localStorage.setItem(\"weatherCache\", JSON.stringify(weatherCache));\r\n\r\n                return data;\r\n            });\r\n    }\r\n}\r\n\r\n// =======================\r\n// domApi\r\n// =======================\r\n\r\nexport class Dom {\r\n    constructor(){\r\n        this.preloader = document.getElementsByClassName(\"preloader\");\r\n        this.locationBlock =  document.getElementById(\"location_block\");\r\n        this.country = document.getElementById(\"country\");\r\n        this.city = document.getElementById(\"city\");\r\n    }\r\n\r\n    showPreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.remove(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    hidePreloader() {\r\n        setTimeout(() => {\r\n            for (let i = 0; i < this.preloader.length; i += 1){\r\n                this.preloader[i].classList.add(\"done\");\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    setLocation(coordinates) {\r\n        this.country.innerHTML = coordinates.location.country;\r\n        this.city.innerHTML = coordinates.location.name;\r\n    }\r\n\r\n    setWeatherToday(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weekday =  weather_today.querySelector(\"[class='weekday']\");\r\n        this.date =  weather_today.querySelector(\"[class='date']\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        this.humidity = weather_today.querySelector(\"[class='humidity']\");\r\n        this.pressure = weather_today.querySelector(\"[class='pressure']\");\r\n        this.winds = weather_today.querySelector(\"[class='wind']\");\r\n\r\n        this.date.innerHTML = weatherData.forecast.forecastday[0].date;\r\n        this.day = new Date(this.date.innerHTML);\r\n        this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n        this.humidity.innerHTML = weatherData.current.humidity + \" %\";\r\n        this.pressure.innerHTML = weatherData.current.pressure_mb + \" hPa\";\r\n        this.winds.innerHTML = (weatherData.current.wind_kph / 3.6).toFixed(1) + \" m/s\";\r\n    }\r\n\r\n    setWeatherForecast(weatherData){\r\n        const weather_item = document.getElementsByClassName(\"weather_item\");\r\n        for (let i = 0; i < weather_item.length; i++){\r\n            this.weekday =  weather_item[i].querySelector(\"[class='weekday']\");\r\n            this.date =  weather_item[i].querySelector(\"[class='date']\");\r\n            this.weatherIcon =  weather_item[i].querySelector(\"[class='weather_icon']\");\r\n            this.tempMax =  weather_item[i].querySelector(\"[class='temp_max']\");\r\n            this.tempMin =  weather_item[i].querySelector(\"[class='temp_min']\");\r\n            \r\n            this.date.innerHTML = weatherData.forecast.forecastday[i + 1].date;\r\n            this.day = new Date(this.date.innerHTML);\r\n            this.weekday.innerHTML = this.day.toLocaleString(\"en\", {weekday: \"short\"});\r\n            this.weatherIcon.src = \"http:\" + weatherData.forecast.forecastday[i + 1].day.condition.icon;\r\n            this.tempMax.innerHTML = weatherData.forecast.forecastday[i + 1].day.maxtemp_c + \" ºC\";\r\n            this.tempMin.innerHTML = weatherData.forecast.forecastday[i + 1].day.mintemp_c + \" ºC\";\r\n        }\r\n    }\r\n\r\n    setWeatherMain(weatherData){\r\n        const weather_today = document.getElementById(\"weather_today\");\r\n        this.weatherIcon =  weather_today.querySelector(\"[class='weather_icon']\");\r\n        this.description = weather_today.querySelector(\"[class='description']\");\r\n        this.tempMax =  weather_today.querySelector(\"[class='temp_max']\");\r\n        this.tempMin =  weather_today.querySelector(\"[class='temp_min']\");\r\n        \r\n        this.weatherIcon.src = \"http:\" + weatherData.current.condition.icon;  \r\n        this.description.innerHTML = weatherData.current.condition.text;\r\n        this.tempMax.innerHTML = weatherData.current.temp_c + \" ºC\";\r\n        this.tempMin.innerHTML = weatherData.forecast.forecastday[0].day.mintemp_c + \" ºC\";\r\n    }\r\n\r\n    showError(error){\r\n        this.errorMessage = document.getElementById(\"error\");\r\n        this.inputCity = document.getElementById(\"input_city\");\r\n        if(!this.inputCity.value) {\r\n            this.errorMessage.innerHTML = \"Please, type city\";\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (!/^[A-z]{1,}/.test(this.inputCity.value)) {\r\n            this.errorMessage.innerHTML = `Please, type city with Latin characters.`;\r\n            this.inputCity.classList.add(\"error\");\r\n\r\n        } else if (error === 400) {            \r\n            this.errorMessage.innerHTML = `Error ${error}. No location is found. Please, type correct city`;\r\n            this.inputCity.classList.add(\"error\");\r\n        } else {\r\n            this.errorMessage.innerHTML = `Error ${error}. Server is not available. Please, try again later`;\r\n        }\r\n\r\n        this.errorMessage.classList.remove(\"done\");\r\n        this.hidePreloader();\r\n\r\n        this.inputCity.onkeyup = () => {\r\n            this.errorMessage.classList.add(\"done\");\r\n            this.inputCity.classList.remove(\"error\");\r\n        }\r\n    }\r\n}\r\n\r\n","// div.cd-left\r\n// =========================\r\n\r\n// =========================\r\n// SetDateandWeatherMainApi\r\n// =========================\r\n\r\nimport { LocationApi, LocalStorageApi, Weather, Dom } from \"./loc&WeatherApi.js\";\r\n\r\nclass setDateMain {\r\n    setDate() {\r\n        this.time = document.getElementById(\"time\");\r\n        this.day = document.getElementById(\"day\");\r\n        this.date = new Date();\r\n        const timeOptions = {\r\n            hour: \"numeric\", \r\n            minute: \"numeric\",\r\n        };\r\n        const dayOptions = {\r\n            weekday: \"long\", \r\n            day: \"numeric\", \r\n            month: \"long\",\r\n            year: \"numeric\",\r\n        };\r\n\r\n        this.time.innerHTML = this.date.toLocaleTimeString(\"en-GB\", timeOptions);\r\n        this.day.innerHTML = this.date.toLocaleDateString(\"en-GB\", dayOptions);\r\n    }\r\n\r\n}\r\n\r\nconst date = new setDateMain();\r\nconst dom = new Dom();\r\nconst weather = new Weather;\r\nconst loc = new LocationApi;\r\nconst storage = new LocalStorageApi();\r\n\r\nfunction loadDateAndLocation(){\r\n    dom.showPreloader();\r\n    date.setDate();\r\n    storage.removeStorageItem();\r\n    loc.getMyIp()\r\n        .then(res => loc.getMyLocation(res.ip))\r\n        .then(res => weather.getWeather(res.city))\r\n        .then(res => {\r\n            dom.setLocation(res);\r\n            dom.setWeatherMain(res);\r\n            dom.hidePreloader();\r\n        });\r\n}\r\n\r\nwindow.onload = () => {\r\n    loadDateAndLocation();\r\n}\r\n\r\n// =========================\r\n// SheduleItem\r\n// =========================\r\n\r\nclass SheduleItem {\r\n\tconstructor(day, parent){\r\n\t\tthis.date = new Date(day).toLocaleDateString().split(\".\").reverse().join(\"-\");\r\n\r\n\t\tthis.sheduleItem = document.createElement(\"div\");\r\n\t\tthis.sheduleItem.classList.add(\"shedule_item\");\r\n\r\n\t\tthis.weekday = document.createElement(\"span\");\r\n\t\tthis.weekday.classList.add(\"weekday\");\r\n\t\tthis.dayMonth = document.createElement(\"span\");\r\n\t\tthis.dayMonth.classList.add(\"day_month\");\r\n\t\tthis.taskDate = document.createElement(\"div\");\r\n\t\tthis.taskDate.classList.add(\"task_date\");\r\n\t\tthis.taskDate.appendChild(this.weekday);\r\n\t\tthis.taskDate.appendChild(this.dayMonth);\r\n\r\n\t\tthis.taskRow = document.createElement(\"div\");\r\n\t\tthis.taskRow.classList.add(\"task_row\");\r\n\t\tthis.statOutput = document.createElement(\"div\");\r\n\t\tthis.statOutput.classList.add(\"statOutput\");\r\n\t\tthis.taskSet = document.createElement(\"div\");\r\n\t\tthis.taskSet.classList.add(\"taskSet\");\r\n\t\tthis.taskSet.appendChild(this.taskRow);\r\n\t\tthis.taskSet.appendChild(this.statOutput);\r\n\t\t\r\n\t\tthis.setDate(day);\r\n\t\tthis.setTasks();\r\n\t\tthis.setStatistic();\r\n\t\tthis.checkHiddenTask = true;\r\n\t\tthis.sheduleItem.onclick = this.hideTasks.bind(this);\t\t\r\n\r\n\t\tthis.sheduleItem.appendChild(this.taskDate);\r\n\t\tthis.sheduleItem.appendChild(this.taskSet);\t\t\r\n\t\tparent.appendChild(this.sheduleItem);\r\n\t}\r\n\r\n\tsetDate(day){\r\n\t\tthis.weekday.textContent = new Date(day).toDateString().slice(0, 3);\r\n\t\tthis.dayMonth.textContent = new Date(day).toLocaleDateString().slice(0, 5);\r\n    }\r\n    \r\n    setTasks(){\r\n\t\tthis.taskStr = \"\";\r\n\t\tif(todoCache[this.date]){\r\n\t\t\tthis.taskArr = Object.values(todoCache[this.date]);\r\n\t\t\tthis.taskArr.map((el) => {\r\n\t\t\t\tif(this.taskArr.indexOf(el) < 3) {\r\n\t\t\t\t\t(el.state === true) ? this.taskStr +=`<p><span>${el.task}</span></p>`\r\n\t\t\t\t\t\t\t\t\t\t: this.taskStr +=`<p>${el.task}</p>`;\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t} else {\t\t\t\t\r\n\t\t\t\t\t(el.state === true) ? this.taskStr +=`<p class=\"hide\"><span>${el.task}</span></p>`\r\n\t\t\t\t\t\t\t\t\t\t: this.taskStr +=`<p class=\"hide\">${el.task}</p>`;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\t\r\n\t\tthis.taskRow.innerHTML = this.taskStr;\r\n\t}\r\n\r\n\tsetStatistic(){\r\n\t\tif(todoCache[this.date]){\r\n\t\t\tthis.total = Object.keys(todoCache[this.date]).length;\r\n\t\t\tthis.done = 0;\t\t\t\r\n\t\t\tfor(let obj of Object.values(todoCache[this.date])){\r\n\t\t\t\tif (obj.state === true) {\r\n\t\t\t\t\tthis.done += 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t(this.done === this.total) ? this.statistic = `All tasks completed`\r\n\t\t\t\t\t\t\t: this.statistic = `Completed: <span class=\"completed\">${this.done}</span> of <span class=\"total\">${this.total}</span>`;\t\t\r\n\t\t} else {\r\n\t\t\tthis.total = 0;\r\n\t\t\tthis.statistic = `${this.total} task on this day`;\r\n\t\t}\t\t\t\r\n\t\tthis.statOutput.innerHTML = this.statistic;\r\n\t}\r\n\r\n\thideTasks(){\r\n\t\tthis.arr = this.sheduleItem.querySelectorAll(\"p\");\r\n\t\tif(this.arr.length > 3) {\r\n\t\t\tif(this.checkHiddenTask) {\r\n\t\t\t\tfor(let i = 3; i < this.arr.length; i++){\r\n\t\t\t\t\tthis.arr[i].classList.remove(\"hide\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkHiddenTask = false;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tfor(let i = 3; i < this.arr.length; i++){\r\n\t\t\t\t\tthis.arr[i].classList.add(\"hide\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.checkHiddenTask = true;\t\t\t\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}\t\t\t\t\t\r\n\t}\t\r\n}\r\n\r\nconst todoCache = JSON.parse(localStorage.getItem(\"todoCache\")) || {};\r\nconst sheduleWrp = document.getElementById(\"shedule_wrp\");\r\nconst shedule = document.createElement(\"div\");\r\nshedule.setAttribute(\"id\", \"shedule\");\r\n\r\nfor (let i = 0, day = (new Date().getTime() - (24 * 60 * 60 * 1000)); \r\n\t\ti < 8; \r\n\t\ti++, day += (24 * 60 * 60 * 1000)){\r\n\r\n\t\tlet sheduleItem = new SheduleItem(day, shedule);\r\n}\r\n\r\nsheduleWrp.appendChild(shedule);\r\n\r\n// ========================================\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}